<!DOCTYPE html>
<html lang="en">

<head>
    <title>Ametrine.host | Billing</title>
    <link rel="icon" type="image/png" href="../images/favicon.png">
    <!-- Meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="description"
        content="Powerful server hosting starting at â‚¬0.75/GB. We're a transparent hosting provider with a 100% uptime and reliable support.">
    <!-- APPLE -->
    <!-- Apple Touch Icon (at least 200x200px) -->
    <link rel="apple-touch-icon" href="../images/apple-touch-icon.png">
    <!-- To run web application in full-screen -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- Status Bar Style-->
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!-- END OF APPLE -->
    <!-- Microsoft Tiles -->
    <meta name="msapplication-config" content="browserconfig.xml">
    <!--STYLESHEETS-->
    <!--Asynchronous load-->
    <link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'"
        href="https://use.fontawesome.com/releases/v5.15.3/css/all.css"
        integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous"
        media="">
    <noscript>
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css">
    </noscript>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap"
        rel="stylesheet">
    <link href="/billing/public/stylesheets/ticket.css" rel="stylesheet">
    <link href="/billing/public/stylesheets/shared.css" rel="stylesheet">
    <link href="/billing/public/stylesheets/themes.css" rel="stylesheet">
    <link href="/billing/public/stylesheets/navbar.css" rel="stylesheet">
    <script src="https://www.recaptcha.net/recaptcha/api.js" async defer></script>
    <script src="/billing/public/javascripts/theme.js" async defer></script>
    <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
        <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
</head>
<body class=<%=(it.userData.email) ? "loggedIn" : ""%>>
    <%~ E.includeFile('../../public/templates/navbar.eta', {icon: it.userData.email ? "user-cog" : "users", text: it.userData.email ? "My Account" : "Sign-In", permission_id: it.userData.permission_id, config: it.config}) %>
    <main>
        <div>
            <div>
                <h1><%=decodeURI(atob(it.ticket.subject))%></h1><p class="ticketID">Ticket ID: <%=it.ticket.ticket_id%></p>
            </div>
            <hr>
            <h2><%= (it.userData.email) ? "" : "Sign-In or create an account to view or create tickets"%></h2>
<form id="ticketCreate">
                <fieldset>
                    <!--PUT TEXTAREA HERE-->
                    <div class="editorWrapper">
                        <div id="editor"></div>
                        <input type="hidden" name="quill-html" id="quill-html">
                    </div>
                </fieldset>
                <fieldset class="screenshotsWrapper">
                    <label for="screenshots">Upload Screenshots</label>
                    <input type="file" id="screenshots" multiple="multiple" accept="image/png, image/jpeg">
                    <p id="screenshotsStatus">Max. 5 screenshots</p>
                </fieldset>
                <fieldset id="submitWrapper">
                    <button><i class="fa fa-times-circle"></i> Close Ticket</button>
                    <input type="submit" value="Send a new message">
                </fieldset>
            </form>
            <span class="logs">
                <hr id="logs">
                <span class="opened">
                    <hr>
                    <p>Ticket Content:</p>
                    <span class="title">
                        <img src="/billing/public/images/User.svg" height="50" width="50" alt="User">
                            <div>
                                <p><%=it.userData.name%></p>
                                <p class="role">Customer</p>
                            </div>
                    </span>
                    <span id="content"></span>
                </span>
            </span>
            <p id="errorText"></p>
        </div>
    </main>
    <%~ E.includeFile('../../public/templates/authentication.eta')%>
    <%~ E.includeFile('../../public/templates/support.eta')%>
    <%~ E.includeFile('../../public/templates/announcements.eta') %>
    <%~ E.includeFile('../../public/javascripts/announcements.eta', {userData: it.userData}) %>
    <%~ E.includeFile('../../public/javascripts/retheme.eta', {userData: it.userData}) %>
    <script src="/billing/public/javascripts/authentication.js" async defer></script>
    <script src="/billing/public/javascripts/popups.js" async defer></script>
    <script>
        var container = document.getElementById('editor');
        var editor = new Quill(container, {
            theme: "snow"
        });
        var container2 = document.getElementById('content');
        var editor2 = new Quill(container2, {
            theme: "snow",
            readOnly: true,
            modules: {
                toolbar: false
            }
        });
        editor2.setContents(<%~it.ticket.content%>, "api")
    </script>
</body>